const _0x3adc9c=_0x4b2d;(function(_0x40b70b,_0x36dfd9){const _0x21def7=_0x4b2d,_0x2e1583=_0x40b70b();while(!![]){try{const _0x2558a9=parseInt(_0x21def7(0x1f5))/0x1+-parseInt(_0x21def7(0x1e5))/0x2*(parseInt(_0x21def7(0x1f6))/0x3)+-parseInt(_0x21def7(0x1c7))/0x4*(-parseInt(_0x21def7(0x1af))/0x5)+-parseInt(_0x21def7(0x1b6))/0x6*(-parseInt(_0x21def7(0x1b8))/0x7)+-parseInt(_0x21def7(0x1cc))/0x8+parseInt(_0x21def7(0x1b0))/0x9*(parseInt(_0x21def7(0x1e3))/0xa)+parseInt(_0x21def7(0x1e6))/0xb;if(_0x2558a9===_0x36dfd9)break;else _0x2e1583['push'](_0x2e1583['shift']());}catch(_0x3662bf){_0x2e1583['push'](_0x2e1583['shift']());}}}(_0x27f2,0x6ce51));class WalletService{constructor(){const _0x33b121=_0x4b2d;this[_0x33b121(0x201)]=new CryptoManager(),this[_0x33b121(0x1cb)]=new WalletStorage();}async['createWallet'](_0x696f2b){const _0x5e5271=_0x4b2d,{walletName:_0x16b980,isFirstWallet:isFirstWallet=![],importData:importData=null,walletManager:_0x302775,sessionKey:_0xa1cca5,onProgress:onProgress=null}=_0x696f2b;try{const _0x44c12c=_0x1677ed=>{if(onProgress)onProgress(_0x1677ed);};this[_0x5e5271(0x1f0)]({'walletName':_0x16b980,'importData':importData}),_0x44c12c('Validating\x20wallet\x20data...');const _0xed22f0=_0x302775?.['getWalletCount']()||0x0;if(_0xed22f0>=0x5)throw new Error(_0x5e5271(0x1ed));if(_0x302775){const _0x4ca939=_0x302775[_0x5e5271(0x1e7)](),_0x23d962=_0x4ca939['some'](_0x435cfa=>_0x435cfa[_0x5e5271(0x200)]['toLowerCase']()===_0x16b980[_0x5e5271(0x1db)]());if(_0x23d962)throw new Error(_0x5e5271(0x1df));}let _0x1bac6f;importData?(_0x44c12c(_0x5e5271(0x1fb)),_0x1bac6f=await this[_0x5e5271(0x1f8)](importData,_0x16b980)):(_0x44c12c(_0x5e5271(0x1be)),_0x1bac6f=await this['generateNewWallet'](_0x16b980));_0x44c12c('Validating\x20wallet...'),this['validateWalletData'](_0x1bac6f),_0x44c12c('Storing\x20wallet...');if(!_0xa1cca5)throw new Error('Session\x20key\x20not\x20available\x20for\x20wallet\x20encryption');const _0x5c86b6=await this[_0x5e5271(0x1c8)](_0x1bac6f,_0x302775,isFirstWallet,importData,_0xa1cca5);return _0x44c12c(_0x5e5271(0x1b5)),{'success':!![],'walletData':_0x5c86b6||_0x1bac6f,'isFirstWallet':isFirstWallet,'message':(importData?_0x5e5271(0x1dd):_0x5e5271(0x1f7))+'\x20wallet\x20\x22'+_0x16b980+_0x5e5271(0x1ec)};}catch(_0x40bb2a){throw _0x40bb2a;}}['validateWalletCreationInputs']({walletName:_0x13d4ce,importData:_0x3be00c}){const _0x50dcd4=_0x4b2d;if(!_0x13d4ce||typeof _0x13d4ce!=='string')throw new Error(_0x50dcd4(0x1bf));if(_0x13d4ce[_0x50dcd4(0x1cd)]>0x1e)throw new Error('Wallet\x20name\x20must\x20be\x2030\x20characters\x20or\x20less');if(_0x13d4ce['trim']()!==_0x13d4ce)throw new Error('Wallet\x20name\x20cannot\x20start\x20or\x20end\x20with\x20spaces');if(_0x3be00c){if(!_0x3be00c[_0x50dcd4(0x1ae)]||typeof _0x3be00c[_0x50dcd4(0x1ae)]!==_0x50dcd4(0x1ef))throw new Error(_0x50dcd4(0x1fd));if(!_0x3be00c[_0x50dcd4(0x1c5)]||typeof _0x3be00c['address']!=='string')throw new Error(_0x50dcd4(0x1eb));if(!_0x3be00c[_0x50dcd4(0x1c5)][_0x50dcd4(0x1f1)](_0x50dcd4(0x1c6)))throw new Error('Invalid\x20wallet\x20address\x20format\x20(must\x20start\x20with\x20\x22oct\x22)');if(!/^[A-Za-z0-9+/]*={0,2}$/['test'](_0x3be00c[_0x50dcd4(0x1ae)]))throw new Error(_0x50dcd4(0x1ce));}}async[_0x3adc9c(0x1d6)](_0x33c1e3){const _0x41ff13=_0x3adc9c;try{const _0x328be1=await this[_0x41ff13(0x201)]['generateKeyPair']();return{'name':_0x33c1e3,'address':_0x328be1[_0x41ff13(0x1c5)],'privateKey':_0x328be1[_0x41ff13(0x1fe)],'publicKey':_0x328be1['publicKeyBase64'],'mnemonic':_0x328be1[_0x41ff13(0x1ea)],'mnemonicWords':_0x328be1[_0x41ff13(0x1b3)],'isImported':![],'createdAt':Date['now']()};}catch(_0x2098f7){throw new Error(_0x41ff13(0x1e0)+_0x2098f7[_0x41ff13(0x1d5)]);}}async['importWallet'](_0x473fff,_0x6a883c){const _0x231604=_0x3adc9c;try{const {privateKey:_0x10ca62,address:_0x552114}=_0x473fff,_0xe1c2b0=this[_0x231604(0x201)][_0x231604(0x1b2)](_0x10ca62);if(!_0xe1c2b0)throw new Error(_0x231604(0x1de));return{'name':_0x6a883c,'address':_0x552114,'privateKey':_0x10ca62,'publicKey':this[_0x231604(0x201)][_0x231604(0x1e2)](),'mnemonic':null,'mnemonicWords':null,'isImported':!![],'createdAt':Date[_0x231604(0x1ee)]()};}catch(_0x2393da){throw new Error(_0x231604(0x1f4)+_0x2393da['message']);}}[_0x3adc9c(0x1d4)](_0x4b4885){const _0x483624=_0x3adc9c,_0x53e956=[_0x483624(0x200),'address','privateKey','publicKey'];for(const _0x3dce1d of _0x53e956){if(!_0x4b4885[_0x3dce1d])throw new Error('Missing\x20required\x20wallet\x20field:\x20'+_0x3dce1d);}if(!_0x4b4885[_0x483624(0x1c5)][_0x483624(0x1f1)]('oct'))throw new Error(_0x483624(0x1d3));if(_0x4b4885[_0x483624(0x1ae)][_0x483624(0x1cd)]<0x20)throw new Error(_0x483624(0x1c1));if(_0x4b4885[_0x483624(0x1bc)][_0x483624(0x1cd)]<0x20)throw new Error(_0x483624(0x1c4));}async[_0x3adc9c(0x1c8)](_0x57bcc2,_0x4ad081,_0x5df1f5,_0x49f124,_0xe8e42b){const _0x48d2ac=_0x3adc9c;try{if(!_0x4ad081)throw new Error(_0x48d2ac(0x1e4));const _0x5a5f0c=_0x4ad081[_0x48d2ac(0x1ca)][_0x48d2ac(0x1cf)](_0x57bcc2,_0x57bcc2[_0x48d2ac(0x200)]);return _0x49f124&&(_0x5a5f0c[_0x48d2ac(0x1fc)][_0x48d2ac(0x1e8)]=_0x48d2ac(0x1bd)),_0x4ad081[_0x48d2ac(0x1d0)][_0x48d2ac(0x1e1)](_0x5a5f0c),_0x5df1f5&&(_0x4ad081['activeWallet']=_0x5a5f0c,_0x4ad081['activeWalletId']=_0x5a5f0c['id'],_0x5a5f0c[_0x48d2ac(0x1dc)]=!![]),await _0x4ad081[_0x48d2ac(0x1ca)][_0x48d2ac(0x1c0)](_0x4ad081[_0x48d2ac(0x1d0)],_0xe8e42b,_0x4ad081[_0x48d2ac(0x1d9)]),_0x5a5f0c;}catch(_0x13c49e){throw new Error('Failed\x20to\x20store\x20wallet:\x20'+_0x13c49e[_0x48d2ac(0x1d5)]);}}static['getWalletManager'](_0x45cd69){const _0x1d6b55=_0x3adc9c;if(!_0x45cd69)return null;const _0x354c49=_0x45cd69[_0x1d6b55(0x1b4)]();if(!_0x354c49)return null;return _0x354c49;}static async[_0x3adc9c(0x1bb)](_0x4ea57c){const _0x5a0bd4=_0x3adc9c;if(!_0x4ea57c)return{'isAuthenticated':![],'isPasswordSet':![],'isUnlocked':![],'needsSetup':!![]};try{const _0x3f7a17=await _0x4ea57c[_0x5a0bd4(0x1e9)](),_0x2822e5=_0x4ea57c[_0x5a0bd4(0x1c9)]();return{'isAuthenticated':_0x3f7a17&&_0x2822e5,'isPasswordSet':_0x3f7a17,'isUnlocked':_0x2822e5,'needsSetup':!_0x3f7a17};}catch(_0x156ba2){return{'isAuthenticated':![],'isPasswordSet':![],'isUnlocked':![],'needsSetup':!![],'error':_0x156ba2[_0x5a0bd4(0x1d5)]};}}static[_0x3adc9c(0x1f2)](_0x54143d){const _0x3b3e33=_0x3adc9c,_0x25d0a5=[];_0x54143d[_0x3b3e33(0x1ba)]!==undefined&&(_0x54143d[_0x3b3e33(0x1ba)]&&_0x54143d[_0x3b3e33(0x1ba)][_0x3b3e33(0x1cd)]<0x4&&_0x25d0a5[_0x3b3e33(0x1e1)]('Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long'),_0x54143d[_0x3b3e33(0x1b7)]!==undefined&&(_0x54143d[_0x3b3e33(0x1ba)]!==_0x54143d[_0x3b3e33(0x1b7)]&&_0x25d0a5['push'](_0x3b3e33(0x1b9))));if(_0x54143d[_0x3b3e33(0x1d2)]!==undefined){if(!_0x54143d[_0x3b3e33(0x1d2)]||!_0x54143d['walletName'][_0x3b3e33(0x1d7)]())_0x25d0a5[_0x3b3e33(0x1e1)]('Please\x20enter\x20a\x20wallet\x20name');else _0x54143d['walletName'][_0x3b3e33(0x1cd)]>0x1e&&_0x25d0a5[_0x3b3e33(0x1e1)](_0x3b3e33(0x1d8));}if(_0x54143d[_0x3b3e33(0x1f9)]!==undefined){const _0xa907ea=parseFloat(_0x54143d[_0x3b3e33(0x1f9)]);(isNaN(_0xa907ea)||_0xa907ea<=0x0)&&_0x25d0a5[_0x3b3e33(0x1e1)]('Please\x20enter\x20a\x20valid\x20amount');}if(_0x54143d['address']!==undefined){if(!_0x54143d[_0x3b3e33(0x1c5)]||!_0x54143d[_0x3b3e33(0x1c5)]['trim']())_0x25d0a5[_0x3b3e33(0x1e1)](_0x3b3e33(0x1da));else!_0x54143d[_0x3b3e33(0x1c5)]['startsWith']('oct')&&_0x25d0a5['push']('Invalid\x20address\x20format\x20(must\x20start\x20with\x20\x22oct\x22)');}return{'isValid':_0x25d0a5['length']===0x0,'errors':_0x25d0a5};}static async['safeGetElement'](_0x26d822,_0x4e3caf={}){const _0x1bcec6=_0x3adc9c,{required:required=![],timeout:timeout=0x7d0,fallbackId:fallbackId=null}=_0x4e3caf;try{if(window['domUtils']&&window[_0x1bcec6(0x1fa)][_0x1bcec6(0x1c3)])return await window[_0x1bcec6(0x1fa)][_0x1bcec6(0x1c3)](_0x26d822,{'timeout':timeout,'required':required});const _0x4c1984=document[_0x1bcec6(0x1ff)](_0x26d822);if(!_0x4c1984&&fallbackId)return document['getElementById'](fallbackId);if(!_0x4c1984&&required)throw new Error('Required\x20element\x20not\x20found:\x20'+_0x26d822);return _0x4c1984;}catch(_0x18d863){if(required)throw _0x18d863;return null;}}static[_0x3adc9c(0x1b1)](_0x24f630,_0x1d17be,_0xa381ab,_0x111c10={}){const _0x370138=_0x3adc9c;try{let _0x2224f9;if(typeof _0x24f630===_0x370138(0x1ef)){_0x2224f9=document['querySelector'](_0x24f630);if(!_0x2224f9)return![];}else _0x2224f9=_0x24f630;return _0x2224f9[_0x370138(0x1d1)](_0x1d17be,_0xa381ab,_0x111c10),_0x2224f9[_0x370138(0x1f3)](_0x1d17be,_0xa381ab,_0x111c10),!![];}catch(_0x5ad973){return![];}}}function _0x27f2(){const _0x2ca1c1=['Invalid\x20wallet\x20address\x20format','validateWalletData','message','generateNewWallet','trim','Wallet\x20name\x20must\x20be\x2030\x20characters\x20or\x20less','activeWalletId','Please\x20enter\x20an\x20address','toLowerCase','isActive','Imported','Invalid\x20private\x20key\x20format\x20or\x20content','A\x20wallet\x20with\x20this\x20name\x20already\x20exists','Failed\x20to\x20generate\x20wallet:\x20','push','getPublicKey','13180tiCNZa','Wallet\x20manager\x20not\x20available','22fFqTkF','1866920dtPGYd','getAllWallets','source','isPasswordSet','mnemonic','Wallet\x20address\x20is\x20required\x20for\x20import','\x22\x20successfully','Maximum\x20of\x205\x20wallets\x20allowed','now','string','validateWalletCreationInputs','startsWith','validateForm','addEventListener','Failed\x20to\x20import\x20wallet:\x20','397303AtGlSc','21702hrFZpK','Created','importWallet','amount','domUtils','Importing\x20wallet...','metadata','Private\x20key\x20is\x20required\x20for\x20import','privateKeyBase64','querySelector','name','crypto','privateKey','5ztCQys','1305zsNlqw','addSafeEventListener','setPrivateKey','mnemonicWords','getWalletManager','Wallet\x20created\x20successfully!','358230jJCNPh','confirmPassword','56MvigAr','Passwords\x20do\x20not\x20match','password','getAuthStatus','publicKey','imported_key','Generating\x20new\x20wallet...','Please\x20enter\x20a\x20wallet\x20name','storeWallets','Invalid\x20private\x20key\x20length','WalletService','safeGetElement','Invalid\x20public\x20key\x20length','address','oct','406764bqKKWe','storeWallet','isWalletUnlocked','walletStorage','storage','6494856PtcVVq','length','Invalid\x20private\x20key\x20format\x20(must\x20be\x20base64)','createWalletObject','wallets','removeEventListener','walletName'];_0x27f2=function(){return _0x2ca1c1;};return _0x27f2();}function _0x4b2d(_0x2d44da,_0x11d472){const _0x27f2e5=_0x27f2();return _0x4b2d=function(_0x4b2dd1,_0x2040e0){_0x4b2dd1=_0x4b2dd1-0x1ae;let _0x2cc831=_0x27f2e5[_0x4b2dd1];return _0x2cc831;},_0x4b2d(_0x2d44da,_0x11d472);}window[_0x3adc9c(0x1c2)]=WalletService;