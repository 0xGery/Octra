const _0x4fabe3=_0x5bb4;function _0x1f8f(){const _0x1642d4=['===\x20WALLET\x20EXPORT\x20COMPLETE\x20===','color','Wallet\x20ID:','Active\x20wallet\x20details:','keyPair','===\x20WALLET\x20DELETION\x20FAILED\x20===','8388mDdLlA','30sKAWgr','===\x20CLEARING\x20SENSITIVE\x20DATA\x20===','All\x20wallets\x20cleared\x20successfully','createdAt','Inconsistent\x20state\x20fixed','wallets','icon','State\x20consistency\x20check:','Loading\x20wallets\x20from\x20storage...','9403iUqcnN','window.crypto\x20exists:','warn','generateWallet','importWallet','===\x20EXPORTING\x20WALLET\x20===','forEach','Wallet\x20deleted\x20successfully','-\x20Active\x20wallet:','\x20\x20-\x20Has\x20private\x20key:\x20','octraCrypto','Fallback\x20generateWallet\x20method\x20created','577092YFqAQC','-\x20Address:','5rYKiFt','-\x20Wallet\x20name:','===\x20ALL\x20WALLETS\x20CLEARED\x20===','Rollback\x20complete','checkStateConsistency','Set\x20as\x20active:','Password\x20provided:','Fallback\x20crypto.generateWallet\x20called','Sensitive\x20data\x20cleared\x20from\x20memory','length','activeWalletId','Active\x20wallet\x20ID\x20not\x20found\x20in\x20wallets\x20array','loadWallets','-\x20Remaining\x20wallets:','cleanedUpCorruptedData','Active\x20wallet\x20ID:','Active\x20wallet\x20ID\x20not\x20found\x20in\x20loaded\x20wallets','===\x20CLEARING\x20ALL\x20WALLETS\x20===','Wallet\x20data\x20generated\x20successfully:','-\x20Private\x20key\x20type:','storage','===\x20CHECKING\x20CRYPTO\x20MODULE\x20FOR\x20WALLET\x20CREATION\x20===','Cannot\x20delete\x20the\x20last\x20wallet','Error\x20clearing\x20sensitive\x20data:','-\x20Private\x20key\x20length:','Wallet\x20not\x20found','clearSensitiveData','metadata','recoveredFromCorruption','corruptedWallets','New\x20wallet\x20created\x20successfully','base64ToBytes','-\x20Has\x20private\x20key:','local','storeWallets','===\x20DELETING\x20WALLET\x20===','Failed\x20to\x20fix\x20inconsistent\x20state','New\x20active\x20wallet\x20ID:','updatedAt','===\x20IMPORTING\x20WALLET\x20===','-\x20Is\x20active:','WalletManager','===\x20WALLET\x20DELETION\x20COMPLETE\x20===','Remaining\x20wallet\x20names:','-\x20Name:','Wallet\x20exported\x20successfully','deleteWallet','Max\x20wallets:','isInitialized','window.CryptoManager\x20exists:','exportWallet','private_key_b64','public_key_b64','Looking\x20for\x20active\x20wallet\x20with\x20ID:','No\x20active\x20wallet\x20ID\x20in\x20storage','fixInconsistentState','-\x20Wallet\x20','privateKey','activeWallet','Loaded\x20wallets:','Wallet\x20name:','splice','===\x20PREPARING\x20ATOMIC\x20TRANSACTION\x20===','setActiveWallet','27XLNPYS','Wallet\x20name\x20already\x20exists','get','===\x20SETTING\x20ACTIVE\x20WALLET\x20FAILED\x20===','No\x20active\x20wallet\x20found,\x20setting\x20first\x20wallet\x20as\x20active','Load\x20result:','clearAllWallets','===\x20WALLET\x20METADATA\x20UPDATE\x20FAILED\x20===','42493MetAwm','publicKey','New\x20wallets\x20count:','getWalletById','None','-\x20Has\x20private_key_b64:','stack','-\x20Has\x20public_key_b64:','\x20\x20-\x20Address:\x20','-\x20Active\x20wallet\x20ID:','===\x20GETTING\x20ACTIVE\x20WALLET\x20===','isWalletAddressUnique','32014CQyfKg','name','Successfully\x20used\x20octraCrypto\x20for\x20wallet\x20creation','===\x20CREATING\x20NEW\x20WALLET\x20(ATOMIC\x20TRANSACTION)\x20===','\x20wallets\x20allowed','Invalid\x20private\x20key\x20format','===\x20CLEARING\x20ALL\x20WALLETS\x20FAILED\x20===','fromSeed','imported_key','map','isActive','832769YcalKX','Wallets\x20saved\x20to\x20storage\x20successfully','Wallet\x20data\x20prepared\x20successfully:','getRecoveryInfo','Saving\x20updated\x20wallets\x20to\x20storage...','===\x20WALLET\x20MANAGER\x20INITIALIZATION\x20===','canAddMoreWallets','generateKeyPair','===\x20ATOMIC\x20WALLET\x20CREATION\x20COMPLETE\x20===','message','Deleting\x20wallet:','===\x20ACTIVE\x20WALLET\x20RETRIEVED\x20===','Active\x20wallet\x20validation\x20successful:','-\x20Wallet\x20address:','Fixing\x20inconsistent\x20state:\x20clearing\x20orphaned\x20storage\x20data','===\x20WALLET\x20RENAME\x20FAILED\x20===','Current\x20wallets\x20count:','mnemonic','CryptoManager','error','-\x20New\x20active\x20wallet:','getWalletMetadata','Wallet\x20imported\x20successfully','Wallet\x20renamed\x20successfully','MAX_WALLETS','===\x20WALLET\x20EXPORT\x20FAILED\x20===','sessionKey','Active\x20wallet\x20restored:','Maximum\x20','bytesToBase64','===\x20WALLET\x20IMPORT\x20COMPLETE\x20===','walletStorage','sign','Error:','Active\x20wallet\x20set\x20successfully','version','isWalletNameUnique','===\x20SETTING\x20ACTIVE\x20WALLET\x20===','===\x20UPDATING\x20MEMORY\x20STATE\x20AFTER\x20SUCCESSFUL\x20STORAGE\x20===','Wallet\x20metadata\x20updated\x20successfully','===\x20WALLET\x20MANAGER\x20INITIALIZED\x20===','438908iUwPyF','Crypto\x20generateWallet\x20not\x20available,\x20attempting\x20fallback...','source','Using\x20window.octraCrypto\x20namespace\x20for\x20wallet\x20creation...','===\x20SENSITIVE\x20DATA\x20CLEARED\x20===','===\x20ROLLING\x20BACK\x20TO\x20ORIGINAL\x20STATE\x20===','toISOString','-\x20Deleted\x20wallet:','find','New\x20name:','getWalletCount','Was\x20active:','Found\x20wallet\x20by\x20ID:','\x20\x20-\x20Private\x20key\x20type:\x20','===\x20WALLET\x20MANAGER\x20INITIALIZATION\x20FAILED\x20===','1576GEJYga','Wallet\x20removed\x20from\x20array','lastRecoveryInfo','log','crypto','===\x20WALLET\x20METADATA\x20UPDATE\x20COMPLETE\x20===','address'];_0x1f8f=function(){return _0x1642d4;};return _0x1f8f();}(function(_0x4dcfcf,_0x24dfdb){const _0x2e779d=_0x5bb4,_0x5f592c=_0x4dcfcf();while(!![]){try{const _0x3ad355=parseInt(_0x2e779d(0x8f))/0x1+-parseInt(_0x2e779d(0xf1))/0x2*(parseInt(_0x2e779d(0xdd))/0x3)+parseInt(_0x2e779d(0x125))/0x4+-parseInt(_0x2e779d(0x9d))/0x5*(-parseInt(_0x2e779d(0x9b))/0x6)+-parseInt(_0x2e779d(0xfc))/0x7+-parseInt(_0x2e779d(0x78))/0x8*(-parseInt(_0x2e779d(0x85))/0x9)+-parseInt(_0x2e779d(0x86))/0xa*(parseInt(_0x2e779d(0xe5))/0xb);if(_0x3ad355===_0x24dfdb)break;else _0x5f592c['push'](_0x5f592c['shift']());}catch(_0x3a2a52){_0x5f592c['push'](_0x5f592c['shift']());}}}(_0x1f8f,0x1e589));function _0x5bb4(_0x2fff2d,_0x507b71){const _0x1f8f3d=_0x1f8f();return _0x5bb4=function(_0x5bb40c,_0x5e3878){_0x5bb40c=_0x5bb40c-0x6e;let _0x19c4e5=_0x1f8f3d[_0x5bb40c];return _0x19c4e5;},_0x5bb4(_0x2fff2d,_0x507b71);}class WalletManager{constructor(){const _0x57cb8c=_0x5bb4;this[_0x57cb8c(0x8b)]=[],this[_0x57cb8c(0xd7)]=null,this[_0x57cb8c(0xa7)]=null,this[_0x57cb8c(0x11b)]=new WalletStorage(),this[_0x57cb8c(0xcd)]=![],console[_0x57cb8c(0x7b)]('===\x20WALLET\x20MANAGER\x20CONSTRUCTOR\x20==='),console[_0x57cb8c(0x7b)]('Wallet\x20Manager\x20initialized'),console[_0x57cb8c(0x7b)](_0x57cb8c(0xcc),this['walletStorage'][_0x57cb8c(0x114)]);}async['initialize'](_0xc17b49){const _0x359d68=_0x5bb4;console['log'](_0x359d68(0x101)),console[_0x359d68(0x7b)](_0x359d68(0xa3),!!_0xc17b49);try{console['log'](_0x359d68(0x8e));const _0x1894c5=await this[_0x359d68(0x11b)][_0x359d68(0xa9)](_0xc17b49);console['log'](_0x359d68(0xe2),{'walletsCount':_0x1894c5[_0x359d68(0x8b)][_0x359d68(0xa6)],'activeWalletId':_0x1894c5[_0x359d68(0xa7)],'recoveredFromCorruption':_0x1894c5[_0x359d68(0xb9)]||![],'corruptedWalletsCount':_0x1894c5[_0x359d68(0xba)]?_0x1894c5[_0x359d68(0xba)][_0x359d68(0xa6)]:0x0}),this[_0x359d68(0x8b)]=_0x1894c5[_0x359d68(0x8b)],this[_0x359d68(0xa7)]=_0x1894c5['activeWalletId'],this[_0x359d68(0x7a)]={'recoveredFromCorruption':_0x1894c5[_0x359d68(0xb9)]||![],'corruptedWallets':_0x1894c5[_0x359d68(0xba)]||[],'cleanedUpCorruptedData':_0x1894c5[_0x359d68(0xab)]||![]};const _0x13d62c=await this[_0x359d68(0xd4)]();return _0x13d62c&&console[_0x359d68(0x7b)]('Wallet\x20state\x20was\x20inconsistent\x20and\x20has\x20been\x20fixed'),console[_0x359d68(0x7b)](_0x359d68(0xd8)),this['wallets'][_0x359d68(0x95)]((_0xd5460b,_0x35ba20)=>{const _0x7bfab9=_0x359d68;console[_0x7bfab9(0x7b)](_0x7bfab9(0xd5)+(_0x35ba20+0x1)+':\x20'+_0xd5460b[_0x7bfab9(0xf2)]+'\x20('+_0xd5460b['id']+')'),console[_0x7bfab9(0x7b)](_0x7bfab9(0xed)+_0xd5460b[_0x7bfab9(0x7e)]),console[_0x7bfab9(0x7b)](_0x7bfab9(0x98)+!!_0xd5460b[_0x7bfab9(0xd6)]),console[_0x7bfab9(0x7b)](_0x7bfab9(0x76)+typeof _0xd5460b[_0x7bfab9(0xd6)]),console[_0x7bfab9(0x7b)]('\x20\x20-\x20Private\x20key\x20length:\x20'+(_0xd5460b[_0x7bfab9(0xd6)]?_0xd5460b[_0x7bfab9(0xd6)]['length']:0x0)),console[_0x7bfab9(0x7b)]('\x20\x20-\x20Is\x20active:\x20'+_0xd5460b[_0x7bfab9(0xfb)]);}),this['activeWalletId']?(console[_0x359d68(0x7b)](_0x359d68(0xd2),this[_0x359d68(0xa7)]),this[_0x359d68(0xd7)]=this[_0x359d68(0x8b)][_0x359d68(0x71)](_0x3c2eb5=>_0x3c2eb5['id']===this['activeWalletId']),this['activeWallet']?(console[_0x359d68(0x7b)](_0x359d68(0x117),this['activeWallet']['name']),console['log'](_0x359d68(0x82)),console[_0x359d68(0x7b)](_0x359d68(0x9c),this[_0x359d68(0xd7)]['address']),console[_0x359d68(0x7b)]('-\x20Has\x20private\x20key:',!!this[_0x359d68(0xd7)][_0x359d68(0xd6)]),console[_0x359d68(0x7b)](_0x359d68(0xb0),typeof this[_0x359d68(0xd7)][_0x359d68(0xd6)]),console[_0x359d68(0x7b)](_0x359d68(0xb5),this[_0x359d68(0xd7)][_0x359d68(0xd6)]?this[_0x359d68(0xd7)][_0x359d68(0xd6)][_0x359d68(0xa6)]:0x0)):(console[_0x359d68(0x91)](_0x359d68(0xad)),this[_0x359d68(0xa7)]=null)):console['log'](_0x359d68(0xd3)),!this[_0x359d68(0xd7)]&&this[_0x359d68(0x8b)]['length']>0x0&&(console[_0x359d68(0x7b)](_0x359d68(0xe1)),await this[_0x359d68(0xdc)](this[_0x359d68(0x8b)][0x0]['id'])),this[_0x359d68(0xcd)]=!![],console[_0x359d68(0x7b)]('Wallet\x20Manager\x20initialized\x20successfully'),console['log']('-\x20Total\x20wallets:',this[_0x359d68(0x8b)][_0x359d68(0xa6)]),console['log'](_0x359d68(0x97),this[_0x359d68(0xd7)]?this['activeWallet'][_0x359d68(0xf2)]:_0x359d68(0xe9)),console[_0x359d68(0x7b)](_0x359d68(0xee),this['activeWalletId']),console[_0x359d68(0x7b)](_0x359d68(0x124)),!![];}catch(_0x4bd4ce){return console[_0x359d68(0x10f)](_0x359d68(0x77)),console[_0x359d68(0x10f)](_0x359d68(0x11d),_0x4bd4ce[_0x359d68(0x105)]),console[_0x359d68(0x10f)]('Stack:',_0x4bd4ce[_0x359d68(0xeb)]),this[_0x359d68(0xcd)]=![],![];}}[_0x4fabe3(0xff)](){const _0x3ed4c8=_0x4fabe3;return this[_0x3ed4c8(0x7a)]||{'recoveredFromCorruption':![],'corruptedWallets':[]};}['clearRecoveryInfo'](){const _0xdba6cf=_0x4fabe3;this[_0xdba6cf(0x7a)]={'recoveredFromCorruption':![],'corruptedWallets':[]};}async['createWallet'](_0x25f362,_0x24dfc9,_0x38c044=!![]){const _0x865919=_0x4fabe3;console[_0x865919(0x7b)](_0x865919(0xf4)),console[_0x865919(0x7b)](_0x865919(0xd9),_0x25f362),console[_0x865919(0x7b)](_0x865919(0xa2),_0x38c044);const _0x13960e=[...this[_0x865919(0x8b)]],_0x5849b3=this[_0x865919(0xd7)],_0x2e677a=this[_0x865919(0xa7)];try{if(this[_0x865919(0x8b)][_0x865919(0xa6)]>=this[_0x865919(0x11b)][_0x865919(0x114)])throw new Error(_0x865919(0x118)+this[_0x865919(0x11b)][_0x865919(0x114)]+_0x865919(0xf5));const _0x3daf68=await this[_0x865919(0x11b)][_0x865919(0x120)](_0x25f362);if(!_0x3daf68)throw new Error(_0x865919(0xde));console['log'](_0x865919(0xb2)),console[_0x865919(0x7b)](_0x865919(0x90),!!window['crypto']),console['log']('window.crypto.generateWallet\x20exists:',!!window[_0x865919(0x7c)]?.[_0x865919(0x92)]),console[_0x865919(0x7b)](_0x865919(0xce),!!window[_0x865919(0x10e)]);if(!window[_0x865919(0x7c)]||!window[_0x865919(0x7c)][_0x865919(0x92)]){console[_0x865919(0x7b)](_0x865919(0x126));if(window[_0x865919(0x99)])console[_0x865919(0x7b)](_0x865919(0x128)),!window[_0x865919(0x7c)]&&(window[_0x865919(0x7c)]={}),!window[_0x865919(0x7c)]['generateWallet']&&(window[_0x865919(0x7c)]['generateWallet']=window['octraCrypto'][_0x865919(0x92)]),console[_0x865919(0x7b)](_0x865919(0xf3));else{if(window[_0x865919(0x10e)]){console[_0x865919(0x7b)]('Creating\x20fallback\x20generateWallet\x20method...');const _0x5274bf=new window['CryptoManager']();!window[_0x865919(0x7c)]&&(window[_0x865919(0x7c)]={}),!window[_0x865919(0x7c)]['generateWallet']&&(window[_0x865919(0x7c)][_0x865919(0x92)]=async function(){const _0x96583c=_0x865919;return console[_0x96583c(0x7b)](_0x96583c(0xa4)),await _0x5274bf[_0x96583c(0x103)]();}),console['log'](_0x865919(0x9a));}else throw new Error('Neither\x20octraCrypto\x20nor\x20CryptoManager\x20class\x20available\x20for\x20wallet\x20generation');}}console[_0x865919(0x7b)]('Generating\x20new\x20wallet...');const _0x5252a6=await window[_0x865919(0x7c)][_0x865919(0x92)]();console['log'](_0x865919(0xaf)),console[_0x865919(0x7b)](_0x865919(0x9c),_0x5252a6[_0x865919(0x7e)]),console[_0x865919(0x7b)](_0x865919(0xea),!!_0x5252a6['private_key_b64']),console[_0x865919(0x7b)](_0x865919(0xec),!!_0x5252a6[_0x865919(0xd1)]);const _0x1f6856=await this['walletStorage'][_0x865919(0xf0)](_0x5252a6[_0x865919(0x7e)]);if(!_0x1f6856)throw new Error('Generated\x20wallet\x20address\x20already\x20exists\x20(very\x20unlikely)');const _0x22b838=this[_0x865919(0x11b)]['createWalletObject'](_0x5252a6,_0x25f362);console[_0x865919(0x7b)](_0x865919(0xdb));const _0x6c3911=[...this[_0x865919(0x8b)],_0x22b838];let _0xb0c360=this[_0x865919(0xa7)];return _0x38c044&&(_0x22b838[_0x865919(0xfb)]=!![],_0xb0c360=_0x22b838['id'],_0x6c3911[_0x865919(0x95)](_0x452d07=>{const _0x81dc27=_0x865919;_0x452d07['id']!==_0x22b838['id']&&(_0x452d07[_0x81dc27(0xfb)]=![]);})),console['log']('===\x20ATOMIC\x20SAVE\x20TO\x20STORAGE\x20==='),await this[_0x865919(0x11b)][_0x865919(0xbf)](_0x6c3911,_0x24dfc9,_0xb0c360),console['log'](_0x865919(0x122)),this[_0x865919(0x8b)]=_0x6c3911,this[_0x865919(0xa7)]=_0xb0c360,_0x38c044&&(this[_0x865919(0xd7)]=_0x22b838),console[_0x865919(0x7b)](_0x865919(0xbb)),console[_0x865919(0x7b)]('-\x20Wallet\x20ID:',_0x22b838['id']),console['log'](_0x865919(0x9e),_0x22b838[_0x865919(0xf2)]),console[_0x865919(0x7b)](_0x865919(0x109),_0x22b838[_0x865919(0x7e)]),console[_0x865919(0x7b)](_0x865919(0xc5),_0x22b838[_0x865919(0xfb)]),console[_0x865919(0x7b)](_0x865919(0x104)),{'success':!![],'wallet':_0x22b838};}catch(_0x15db05){return console[_0x865919(0x10f)]('===\x20ATOMIC\x20WALLET\x20CREATION\x20FAILED\x20==='),console[_0x865919(0x10f)](_0x865919(0x11d),_0x15db05[_0x865919(0x105)]),console[_0x865919(0x7b)](_0x865919(0x6e)),this[_0x865919(0x8b)]=_0x13960e,this['activeWallet']=_0x5849b3,this[_0x865919(0xa7)]=_0x2e677a,console['log'](_0x865919(0xa0)),{'success':![],'error':_0x15db05['message']};}}async[_0x4fabe3(0x93)](_0x246bd4,_0x2b48b3,_0x2130eb,_0x3e6e1e,_0x5d5c72=!![]){const _0x47fe99=_0x4fabe3;console[_0x47fe99(0x7b)](_0x47fe99(0xc4)),console[_0x47fe99(0x7b)]('Wallet\x20name:',_0x246bd4),console[_0x47fe99(0x7b)]('Import\x20type:\x20private\x20key'),console[_0x47fe99(0x7b)](_0x47fe99(0xa2),_0x5d5c72);try{if(this[_0x47fe99(0x8b)][_0x47fe99(0xa6)]>=this[_0x47fe99(0x11b)][_0x47fe99(0x114)])throw new Error(_0x47fe99(0x118)+this[_0x47fe99(0x11b)][_0x47fe99(0x114)]+_0x47fe99(0xf5));const _0x222e49=await this[_0x47fe99(0x11b)][_0x47fe99(0x120)](_0x246bd4);if(!_0x222e49)throw new Error(_0x47fe99(0xde));const _0x19fba2=await this['walletStorage'][_0x47fe99(0xf0)](_0x2130eb);if(!_0x19fba2)throw new Error('Imported\x20wallet\x20address\x20already\x20exists');const _0x52420e={'private_key_b64':_0x2b48b3,'address':_0x2130eb};try{const _0x4dfb36=new CryptoManager(),_0x7e5c82=_0x4dfb36[_0x47fe99(0xbc)](_0x2b48b3),_0x252f5a=nacl[_0x47fe99(0x11c)][_0x47fe99(0x83)][_0x47fe99(0xf8)](_0x7e5c82);_0x52420e[_0x47fe99(0xd1)]=_0x4dfb36[_0x47fe99(0x119)](_0x252f5a[_0x47fe99(0xe6)]);}catch(_0x250fbf){throw new Error(_0x47fe99(0xf6));}console[_0x47fe99(0x7b)](_0x47fe99(0xfe)),console[_0x47fe99(0x7b)](_0x47fe99(0x9c),_0x52420e['address']),console[_0x47fe99(0x7b)](_0x47fe99(0xea),!!_0x52420e[_0x47fe99(0xd0)]),console[_0x47fe99(0x7b)]('-\x20Has\x20public_key_b64:',!!_0x52420e[_0x47fe99(0xd1)]);const _0x5f42e0=this[_0x47fe99(0x11b)]['createWalletObject'](_0x52420e,_0x246bd4);return _0x5f42e0[_0x47fe99(0xb8)][_0x47fe99(0x127)]=_0x47fe99(0xf9),this[_0x47fe99(0x8b)]['push'](_0x5f42e0),_0x5d5c72&&(this[_0x47fe99(0xd7)]=_0x5f42e0,this[_0x47fe99(0xa7)]=_0x5f42e0['id'],_0x5f42e0[_0x47fe99(0xfb)]=!![],this[_0x47fe99(0x8b)]['forEach'](_0x4c82d8=>{const _0x124b05=_0x47fe99;_0x4c82d8['id']!==_0x5f42e0['id']&&(_0x4c82d8[_0x124b05(0xfb)]=![]);})),await this[_0x47fe99(0x11b)][_0x47fe99(0xbf)](this[_0x47fe99(0x8b)],_0x3e6e1e,this[_0x47fe99(0xa7)]),console[_0x47fe99(0x7b)](_0x47fe99(0x112)),console[_0x47fe99(0x7b)]('-\x20Wallet\x20ID:',_0x5f42e0['id']),console['log'](_0x47fe99(0x9e),_0x5f42e0[_0x47fe99(0xf2)]),console['log'](_0x47fe99(0x109),_0x5f42e0[_0x47fe99(0x7e)]),console[_0x47fe99(0x7b)]('-\x20Import\x20source:',_0x5f42e0['metadata'][_0x47fe99(0x127)]),console[_0x47fe99(0x7b)]('-\x20Is\x20active:',_0x5f42e0[_0x47fe99(0xfb)]),console[_0x47fe99(0x7b)](_0x47fe99(0x11a)),{'success':!![],'wallet':_0x5f42e0};}catch(_0x2e1728){return console[_0x47fe99(0x10f)]('===\x20WALLET\x20IMPORT\x20FAILED\x20==='),console['error'](_0x47fe99(0x11d),_0x2e1728[_0x47fe99(0x105)]),{'success':![],'error':_0x2e1728[_0x47fe99(0x105)]};}}async['setActiveWallet'](_0x491f97){const _0x286f14=_0x4fabe3;console[_0x286f14(0x7b)](_0x286f14(0x121)),console['log'](_0x286f14(0xc2),_0x491f97);try{const _0x536b91=this['wallets']['find'](_0x15f6d0=>_0x15f6d0['id']===_0x491f97);if(!_0x536b91)throw new Error(_0x286f14(0xb6));this['activeWallet']=_0x536b91,this['activeWalletId']=_0x491f97,this[_0x286f14(0x8b)][_0x286f14(0x95)](_0x53ff3c=>{_0x53ff3c['isActive']=_0x53ff3c['id']===_0x491f97;});const _0x539ad1=await chrome[_0x286f14(0xb1)][_0x286f14(0xbe)][_0x286f14(0xdf)](['sessionKey']);return _0x539ad1[_0x286f14(0x116)]&&await this[_0x286f14(0x11b)]['storeWallets'](this[_0x286f14(0x8b)],_0x539ad1[_0x286f14(0x116)],this[_0x286f14(0xa7)]),console[_0x286f14(0x7b)](_0x286f14(0x11e)),console[_0x286f14(0x7b)](_0x286f14(0x97),_0x536b91['name']),console['log']('-\x20Active\x20address:',_0x536b91[_0x286f14(0x7e)]),console['log']('===\x20ACTIVE\x20WALLET\x20SET\x20==='),!![];}catch(_0x37edd3){return console[_0x286f14(0x10f)](_0x286f14(0xe0)),console[_0x286f14(0x10f)]('Error:',_0x37edd3[_0x286f14(0x105)]),![];}}['getActiveWallet'](){const _0x5283c3=_0x4fabe3;console[_0x5283c3(0x7b)](_0x5283c3(0xef)),console[_0x5283c3(0x7b)](_0x5283c3(0xac),this[_0x5283c3(0xa7)]),console[_0x5283c3(0x7b)]('Total\x20wallets:',this[_0x5283c3(0x8b)][_0x5283c3(0xa6)]);if(!this[_0x5283c3(0xd7)]){console[_0x5283c3(0x7b)]('No\x20active\x20wallet\x20set,\x20searching\x20by\x20ID...');if(this[_0x5283c3(0xa7)]){const _0x52e4fc=this[_0x5283c3(0x8b)][_0x5283c3(0x71)](_0x1c3642=>_0x1c3642['id']===this['activeWalletId']);if(_0x52e4fc)console[_0x5283c3(0x7b)](_0x5283c3(0x75),_0x52e4fc['name']),this[_0x5283c3(0xd7)]=_0x52e4fc;else return console[_0x5283c3(0x10f)](_0x5283c3(0xa8)),null;}else return console[_0x5283c3(0x10f)]('No\x20active\x20wallet\x20ID\x20set'),null;}if(!this['activeWallet'][_0x5283c3(0xd6)])return console['error']('Active\x20wallet\x20missing\x20private\x20key'),null;if(!this[_0x5283c3(0xd7)]['address'])return console[_0x5283c3(0x10f)]('Active\x20wallet\x20missing\x20address'),null;return console['log'](_0x5283c3(0x108)),console[_0x5283c3(0x7b)](_0x5283c3(0xc9),this[_0x5283c3(0xd7)][_0x5283c3(0xf2)]),console[_0x5283c3(0x7b)]('-\x20Address:',this[_0x5283c3(0xd7)][_0x5283c3(0x7e)]),console['log'](_0x5283c3(0xbd),!!this[_0x5283c3(0xd7)][_0x5283c3(0xd6)]),console['log']('-\x20Private\x20key\x20type:',typeof this['activeWallet']['privateKey']),console[_0x5283c3(0x7b)](_0x5283c3(0xb5),this[_0x5283c3(0xd7)]['privateKey']?this[_0x5283c3(0xd7)][_0x5283c3(0xd6)][_0x5283c3(0xa6)]:0x0),console['log'](_0x5283c3(0x107)),this[_0x5283c3(0xd7)];}['getAllWallets'](){return this['wallets'];}[_0x4fabe3(0xe8)](_0x3c726a){const _0x428cfb=_0x4fabe3;return this[_0x428cfb(0x8b)][_0x428cfb(0x71)](_0x1c5453=>_0x1c5453['id']===_0x3c726a)||null;}[_0x4fabe3(0x111)](){const _0x3c3d02=_0x4fabe3;return this[_0x3c3d02(0x8b)][_0x3c3d02(0xfa)](_0x25562f=>({'id':_0x25562f['id'],'name':_0x25562f[_0x3c3d02(0xf2)],'address':_0x25562f[_0x3c3d02(0x7e)],'createdAt':_0x25562f[_0x3c3d02(0x89)],'isActive':_0x25562f[_0x3c3d02(0xfb)],'metadata':{'source':_0x25562f[_0x3c3d02(0xb8)][_0x3c3d02(0x127)],'icon':_0x25562f[_0x3c3d02(0xb8)][_0x3c3d02(0x8c)],'color':_0x25562f[_0x3c3d02(0xb8)][_0x3c3d02(0x80)],'category':_0x25562f[_0x3c3d02(0xb8)]['category']}}));}async['renameWallet'](_0x5cb2f9,_0x223317,_0x378a89){const _0x252a1e=_0x4fabe3;console['log']('===\x20RENAMING\x20WALLET\x20==='),console[_0x252a1e(0x7b)](_0x252a1e(0x81),_0x5cb2f9),console['log'](_0x252a1e(0x72),_0x223317);try{const _0x13b1e0=this[_0x252a1e(0x8b)][_0x252a1e(0x71)](_0x3775a8=>_0x3775a8['id']===_0x5cb2f9);if(!_0x13b1e0)throw new Error(_0x252a1e(0xb6));const _0x199d60=await this[_0x252a1e(0x11b)]['isWalletNameUnique'](_0x223317,_0x5cb2f9);if(!_0x199d60)throw new Error(_0x252a1e(0xde));return _0x13b1e0[_0x252a1e(0xf2)]=_0x223317,_0x13b1e0[_0x252a1e(0xc3)]=new Date()['toISOString'](),await this[_0x252a1e(0x11b)][_0x252a1e(0xbf)](this['wallets'],_0x378a89,this['activeWalletId']),console['log'](_0x252a1e(0x113)),console['log']('===\x20WALLET\x20RENAME\x20COMPLETE\x20==='),!![];}catch(_0x35c2c8){return console[_0x252a1e(0x10f)](_0x252a1e(0x10b)),console[_0x252a1e(0x10f)](_0x252a1e(0x11d),_0x35c2c8[_0x252a1e(0x105)]),![];}}async[_0x4fabe3(0xcb)](_0x2ddf78,_0x3bdf51){const _0x41b32e=_0x4fabe3;console['log'](_0x41b32e(0xc0)),console[_0x41b32e(0x7b)]('Wallet\x20ID:',_0x2ddf78),console[_0x41b32e(0x7b)](_0x41b32e(0x10c),this[_0x41b32e(0x8b)][_0x41b32e(0xa6)]),console['log']('Current\x20wallet\x20names:',this[_0x41b32e(0x8b)]['map'](_0x730abc=>_0x730abc[_0x41b32e(0xf2)]));try{if(this[_0x41b32e(0x8b)][_0x41b32e(0xa6)]<=0x1)throw new Error(_0x41b32e(0xb3));const _0x48695a=this[_0x41b32e(0x8b)]['findIndex'](_0x39c192=>_0x39c192['id']===_0x2ddf78);console[_0x41b32e(0x7b)]('Found\x20wallet\x20at\x20index:',_0x48695a);if(_0x48695a===-0x1)throw new Error(_0x41b32e(0xb6));const _0x2a52f5=this['wallets'][_0x48695a],_0x29b6cf=_0x2a52f5[_0x41b32e(0xfb)];return console[_0x41b32e(0x7b)](_0x41b32e(0x106),_0x2a52f5[_0x41b32e(0xf2)]),console[_0x41b32e(0x7b)](_0x41b32e(0x74),_0x29b6cf),this[_0x41b32e(0x8b)][_0x41b32e(0xda)](_0x48695a,0x1),console['log'](_0x41b32e(0x79)),console[_0x41b32e(0x7b)](_0x41b32e(0xe7),this[_0x41b32e(0x8b)][_0x41b32e(0xa6)]),console[_0x41b32e(0x7b)](_0x41b32e(0xc8),this[_0x41b32e(0x8b)][_0x41b32e(0xfa)](_0x23e437=>_0x23e437[_0x41b32e(0xf2)])),_0x29b6cf&&(this[_0x41b32e(0xd7)]=this[_0x41b32e(0x8b)][0x0],this[_0x41b32e(0xa7)]=this[_0x41b32e(0x8b)][0x0]['id'],this[_0x41b32e(0x8b)][0x0][_0x41b32e(0xfb)]=!![],console['log']('Set\x20new\x20active\x20wallet:',this[_0x41b32e(0xd7)][_0x41b32e(0xf2)])),console[_0x41b32e(0x7b)](_0x41b32e(0x100)),await this[_0x41b32e(0x11b)][_0x41b32e(0xbf)](this[_0x41b32e(0x8b)],_0x3bdf51,this[_0x41b32e(0xa7)]),console[_0x41b32e(0x7b)](_0x41b32e(0xfd)),console[_0x41b32e(0x7b)](_0x41b32e(0x96)),console['log'](_0x41b32e(0x70),_0x2a52f5[_0x41b32e(0xf2)]),console['log'](_0x41b32e(0xaa),this[_0x41b32e(0x8b)][_0x41b32e(0xa6)]),console['log'](_0x41b32e(0x110),this['activeWallet']?this[_0x41b32e(0xd7)][_0x41b32e(0xf2)]:_0x41b32e(0xe9)),console[_0x41b32e(0x7b)](_0x41b32e(0xc7)),{'success':!![]};}catch(_0x6566c6){return console[_0x41b32e(0x10f)](_0x41b32e(0x84)),console[_0x41b32e(0x10f)](_0x41b32e(0x11d),_0x6566c6[_0x41b32e(0x105)]),{'success':![],'error':_0x6566c6[_0x41b32e(0x105)]};}}[_0x4fabe3(0xcf)](_0x55b5b5){const _0x3e9751=_0x4fabe3;console[_0x3e9751(0x7b)](_0x3e9751(0x94)),console[_0x3e9751(0x7b)](_0x3e9751(0x81),_0x55b5b5);try{const _0x1cac01=this[_0x3e9751(0x8b)][_0x3e9751(0x71)](_0x1fced0=>_0x1fced0['id']===_0x55b5b5);if(!_0x1cac01)throw new Error('Wallet\x20not\x20found');const _0xfc6caa={'name':_0x1cac01[_0x3e9751(0xf2)],'address':_0x1cac01['address'],'privateKey':_0x1cac01['privateKey'],'publicKey':_0x1cac01['publicKey'],'mnemonic':_0x1cac01[_0x3e9751(0x10d)],'createdAt':_0x1cac01['createdAt'],'exportedAt':new Date()[_0x3e9751(0x6f)](),'version':_0x1cac01[_0x3e9751(0xb8)][_0x3e9751(0x11f)]};return console[_0x3e9751(0x7b)](_0x3e9751(0xca)),console[_0x3e9751(0x7b)]('-\x20Wallet\x20name:',_0x1cac01[_0x3e9751(0xf2)]),console[_0x3e9751(0x7b)](_0x3e9751(0x109),_0x1cac01[_0x3e9751(0x7e)]),console[_0x3e9751(0x7b)](_0x3e9751(0x7f)),_0xfc6caa;}catch(_0x32c150){return console[_0x3e9751(0x10f)](_0x3e9751(0x115)),console[_0x3e9751(0x10f)](_0x3e9751(0x11d),_0x32c150[_0x3e9751(0x105)]),null;}}async['updateWalletMetadata'](_0x40b0fe,_0x596929,_0x514531){const _0x188299=_0x4fabe3;console[_0x188299(0x7b)]('===\x20UPDATING\x20WALLET\x20METADATA\x20==='),console[_0x188299(0x7b)]('Wallet\x20ID:',_0x40b0fe);try{const _0x3525dc=this[_0x188299(0x8b)][_0x188299(0x71)](_0x5410ff=>_0x5410ff['id']===_0x40b0fe);if(!_0x3525dc)throw new Error('Wallet\x20not\x20found');return _0x3525dc['metadata']={..._0x3525dc[_0x188299(0xb8)],..._0x596929},_0x3525dc['updatedAt']=new Date()['toISOString'](),await this[_0x188299(0x11b)][_0x188299(0xbf)](this[_0x188299(0x8b)],_0x514531,this[_0x188299(0xa7)]),console[_0x188299(0x7b)](_0x188299(0x123)),console[_0x188299(0x7b)](_0x188299(0x7d)),!![];}catch(_0x430857){return console['error'](_0x188299(0xe4)),console[_0x188299(0x10f)](_0x188299(0x11d),_0x430857[_0x188299(0x105)]),![];}}[_0x4fabe3(0x73)](){const _0x35ec88=_0x4fabe3;return this[_0x35ec88(0x8b)][_0x35ec88(0xa6)];}async[_0x4fabe3(0xa1)](){const _0x3a339e=_0x4fabe3,_0x4a8365=await this[_0x3a339e(0x11b)]['getWalletMetadata'](),_0x134562=this[_0x3a339e(0x8b)]['length'],_0x5d9f7c=_0x4a8365[_0x3a339e(0xa6)];return console[_0x3a339e(0x7b)](_0x3a339e(0x8d),{'loadedWallets':_0x134562,'storageWallets':_0x5d9f7c,'isInconsistent':_0x134562!==_0x5d9f7c}),_0x134562!==_0x5d9f7c;}async[_0x4fabe3(0xd4)](){const _0x56815e=_0x4fabe3,_0x5b84ce=await this[_0x56815e(0xa1)]();if(_0x5b84ce&&this[_0x56815e(0x8b)][_0x56815e(0xa6)]===0x0){console['log'](_0x56815e(0x10a));const _0x268ab2=await this[_0x56815e(0x11b)][_0x56815e(0xe3)]();return _0x268ab2?(console[_0x56815e(0x7b)](_0x56815e(0x8a)),!![]):(console[_0x56815e(0x10f)](_0x56815e(0xc1)),![]);}return![];}[_0x4fabe3(0x102)](){const _0x80eea7=_0x4fabe3;return this['wallets'][_0x80eea7(0xa6)]<this[_0x80eea7(0x11b)][_0x80eea7(0x114)];}['isReady'](){const _0x3c139d=_0x4fabe3;return this[_0x3c139d(0xcd)];}[_0x4fabe3(0xb7)](){const _0x26088a=_0x4fabe3;console[_0x26088a(0x7b)](_0x26088a(0x87));try{this[_0x26088a(0x8b)][_0x26088a(0x95)](_0x584d19=>{const _0x2a2350=_0x26088a;_0x584d19['privateKey']&&(_0x584d19[_0x2a2350(0xd6)]=null),_0x584d19[_0x2a2350(0xe6)]&&(_0x584d19[_0x2a2350(0xe6)]=null),_0x584d19[_0x2a2350(0x10d)]&&(_0x584d19[_0x2a2350(0x10d)]=null);}),this['activeWallet']=null,console[_0x26088a(0x7b)](_0x26088a(0xa5)),console[_0x26088a(0x7b)](_0x26088a(0x129));}catch(_0x45f7df){console[_0x26088a(0x10f)](_0x26088a(0xb4),_0x45f7df);}}async['clearAllWallets'](){const _0x5ac697=_0x4fabe3;console['log'](_0x5ac697(0xae));try{return this['wallets']=[],this['activeWallet']=null,this[_0x5ac697(0xa7)]=null,this[_0x5ac697(0xcd)]=![],await this['walletStorage'][_0x5ac697(0xe3)](),console[_0x5ac697(0x7b)](_0x5ac697(0x88)),console[_0x5ac697(0x7b)](_0x5ac697(0x9f)),!![];}catch(_0x556761){return console['error'](_0x5ac697(0xf7)),console['error'](_0x5ac697(0x11d),_0x556761[_0x5ac697(0x105)]),![];}}}window[_0x4fabe3(0xc6)]=WalletManager;