const _0xdd34b4=_0x8455;(function(_0x581ea4,_0x21d797){const _0x4ee818=_0x8455,_0x2a57d0=_0x581ea4();while(!![]){try{const _0x25214c=-parseInt(_0x4ee818(0x142))/0x1*(-parseInt(_0x4ee818(0x14f))/0x2)+parseInt(_0x4ee818(0x16f))/0x3+-parseInt(_0x4ee818(0x178))/0x4+parseInt(_0x4ee818(0x13e))/0x5*(-parseInt(_0x4ee818(0x17b))/0x6)+-parseInt(_0x4ee818(0x131))/0x7*(-parseInt(_0x4ee818(0x15b))/0x8)+-parseInt(_0x4ee818(0x14c))/0x9+-parseInt(_0x4ee818(0x16b))/0xa*(-parseInt(_0x4ee818(0x145))/0xb);if(_0x25214c===_0x21d797)break;else _0x2a57d0['push'](_0x2a57d0['shift']());}catch(_0x311633){_0x2a57d0['push'](_0x2a57d0['shift']());}}}(_0x27d5,0x7755e));class WalletService{constructor(){const _0x47a764=_0x8455;this[_0x47a764(0x13b)]=new CryptoManager(),this[_0x47a764(0x169)]=new WalletStorage();}async['createWallet'](_0x12c584){const _0x54e66d=_0x8455,{walletName:_0x4024bd,isFirstWallet:isFirstWallet=![],importData:importData=null,walletManager:_0x526b4a,sessionKey:_0x9ea28,onProgress:onProgress=null}=_0x12c584;try{const _0x4537fd=_0x455d32=>{if(onProgress)onProgress(_0x455d32);};this[_0x54e66d(0x176)]({'walletName':_0x4024bd,'importData':importData}),_0x4537fd(_0x54e66d(0x151));const _0x2a33a2=_0x526b4a?.[_0x54e66d(0x152)]()||0x0;if(_0x2a33a2>=0x5)throw new Error(_0x54e66d(0x137));if(_0x526b4a){const _0x1c9c49=_0x526b4a[_0x54e66d(0x139)](),_0x4a6d93=_0x1c9c49[_0x54e66d(0x191)](_0x4c672e=>_0x4c672e[_0x54e66d(0x153)][_0x54e66d(0x162)]()===_0x4024bd[_0x54e66d(0x162)]());if(_0x4a6d93)throw new Error(_0x54e66d(0x141));}let _0x4a9a41;importData?(_0x4537fd(_0x54e66d(0x130)),_0x4a9a41=await this[_0x54e66d(0x18f)](importData,_0x4024bd)):(_0x4537fd(_0x54e66d(0x133)),_0x4a9a41=await this[_0x54e66d(0x174)](_0x4024bd));_0x4537fd(_0x54e66d(0x171)),this['validateWalletData'](_0x4a9a41),_0x4537fd(_0x54e66d(0x167));if(!_0x9ea28)throw new Error(_0x54e66d(0x13c));const _0x3554fb=await this[_0x54e66d(0x188)](_0x4a9a41,_0x526b4a,isFirstWallet,importData,_0x9ea28);return _0x4537fd(_0x54e66d(0x175)),{'success':!![],'walletData':_0x3554fb||_0x4a9a41,'isFirstWallet':isFirstWallet,'message':(importData?_0x54e66d(0x12c):_0x54e66d(0x172))+_0x54e66d(0x158)+_0x4024bd+_0x54e66d(0x182)};}catch(_0x452483){console[_0x54e66d(0x155)](_0x54e66d(0x181),_0x452483);throw _0x452483;}}[_0xdd34b4(0x176)]({walletName:_0x2a5e17,importData:_0x577f11}){const _0x557ca6=_0xdd34b4;if(!_0x2a5e17||typeof _0x2a5e17!==_0x557ca6(0x18e))throw new Error(_0x557ca6(0x138));if(_0x2a5e17[_0x557ca6(0x17a)]>0x1e)throw new Error('Wallet\x20name\x20must\x20be\x2030\x20characters\x20or\x20less');if(_0x2a5e17[_0x557ca6(0x15c)]()!==_0x2a5e17)throw new Error(_0x557ca6(0x160));if(_0x577f11){if(!_0x577f11[_0x557ca6(0x193)]||typeof _0x577f11[_0x557ca6(0x193)]!=='string')throw new Error(_0x557ca6(0x15f));if(!_0x577f11[_0x557ca6(0x14e)]||typeof _0x577f11[_0x557ca6(0x14e)]!=='string')throw new Error(_0x557ca6(0x13f));if(!_0x577f11[_0x557ca6(0x14e)][_0x557ca6(0x180)]('oct'))throw new Error(_0x557ca6(0x173));if(!/^[A-Za-z0-9+/]*={0,2}$/[_0x557ca6(0x186)](_0x577f11[_0x557ca6(0x193)]))throw new Error('Invalid\x20private\x20key\x20format\x20(must\x20be\x20base64)');}}async[_0xdd34b4(0x174)](_0x1eb2ed){const _0x3bd698=_0xdd34b4;try{const _0x407b75=await this['crypto'][_0x3bd698(0x150)]();return{'name':_0x1eb2ed,'address':_0x407b75[_0x3bd698(0x14e)],'privateKey':_0x407b75['privateKeyBase64'],'publicKey':_0x407b75[_0x3bd698(0x18d)],'mnemonic':_0x407b75['mnemonic'],'mnemonicWords':_0x407b75[_0x3bd698(0x165)],'isImported':![],'createdAt':Date[_0x3bd698(0x14a)]()};}catch(_0x19580d){throw new Error('Failed\x20to\x20generate\x20wallet:\x20'+_0x19580d[_0x3bd698(0x16a)]);}}async[_0xdd34b4(0x18f)](_0x504fd7,_0x1fb7f6){const _0xec67fe=_0xdd34b4;try{const {privateKey:_0x43a748,address:_0x477bf3}=_0x504fd7,_0x2de403=this[_0xec67fe(0x13b)][_0xec67fe(0x140)](_0x43a748);if(!_0x2de403)throw new Error('Invalid\x20private\x20key\x20format\x20or\x20content');return{'name':_0x1fb7f6,'address':_0x477bf3,'privateKey':_0x43a748,'publicKey':this[_0xec67fe(0x13b)]['getPublicKey'](),'mnemonic':null,'mnemonicWords':null,'isImported':!![],'createdAt':Date['now']()};}catch(_0x37ff9b){throw new Error(_0xec67fe(0x16d)+_0x37ff9b[_0xec67fe(0x16a)]);}}[_0xdd34b4(0x179)](_0x248585){const _0x4e9154=_0xdd34b4,_0x4413a5=[_0x4e9154(0x153),'address',_0x4e9154(0x193),_0x4e9154(0x16e)];for(const _0x557ce9 of _0x4413a5){if(!_0x248585[_0x557ce9])throw new Error(_0x4e9154(0x183)+_0x557ce9);}if(!_0x248585[_0x4e9154(0x14e)][_0x4e9154(0x180)](_0x4e9154(0x18b)))throw new Error(_0x4e9154(0x194));if(_0x248585[_0x4e9154(0x193)][_0x4e9154(0x17a)]<0x20)throw new Error('Invalid\x20private\x20key\x20length');if(_0x248585[_0x4e9154(0x16e)][_0x4e9154(0x17a)]<0x20)throw new Error(_0x4e9154(0x134));}async['storeWallet'](_0x57c2cb,_0x1dbf49,_0x3b3baa,_0x43937a,_0x196725){const _0x2b22cd=_0xdd34b4;try{if(!_0x1dbf49)throw new Error(_0x2b22cd(0x185));const _0x4f5fc0=_0x1dbf49[_0x2b22cd(0x12f)][_0x2b22cd(0x177)](_0x57c2cb,_0x57c2cb[_0x2b22cd(0x153)]);return _0x43937a&&(_0x4f5fc0[_0x2b22cd(0x189)][_0x2b22cd(0x184)]=_0x2b22cd(0x170)),_0x1dbf49['wallets']['push'](_0x4f5fc0),_0x3b3baa&&(_0x1dbf49[_0x2b22cd(0x149)]=_0x4f5fc0,_0x1dbf49['activeWalletId']=_0x4f5fc0['id'],_0x4f5fc0[_0x2b22cd(0x17c)]=!![]),await _0x1dbf49[_0x2b22cd(0x12f)][_0x2b22cd(0x147)](_0x1dbf49['wallets'],_0x196725,_0x1dbf49[_0x2b22cd(0x12e)]),console[_0x2b22cd(0x14b)](_0x2b22cd(0x187)),_0x4f5fc0;}catch(_0x14b27e){throw new Error(_0x2b22cd(0x157)+_0x14b27e[_0x2b22cd(0x16a)]);}}static[_0xdd34b4(0x161)](_0x551b31){const _0x1e2b60=_0xdd34b4;if(!_0x551b31)return console[_0x1e2b60(0x15a)](_0x1e2b60(0x166)),null;const _0x30d288=_0x551b31[_0x1e2b60(0x161)]();if(!_0x30d288)return console[_0x1e2b60(0x15a)](_0x1e2b60(0x192)),null;return _0x30d288;}static async[_0xdd34b4(0x146)](_0xb08e8b){const _0x159ab0=_0xdd34b4;if(!_0xb08e8b)return{'isAuthenticated':![],'isPasswordSet':![],'isUnlocked':![],'needsSetup':!![]};try{const _0x5b2a23=await _0xb08e8b[_0x159ab0(0x154)](),_0xaafd3=_0xb08e8b[_0x159ab0(0x163)]();return{'isAuthenticated':_0x5b2a23&&_0xaafd3,'isPasswordSet':_0x5b2a23,'isUnlocked':_0xaafd3,'needsSetup':!_0x5b2a23};}catch(_0x2ae507){return console['error'](_0x159ab0(0x144),_0x2ae507),{'isAuthenticated':![],'isPasswordSet':![],'isUnlocked':![],'needsSetup':!![],'error':_0x2ae507[_0x159ab0(0x16a)]};}}static[_0xdd34b4(0x18c)](_0x1de7fb){const _0x4ea0d3=_0xdd34b4,_0x58532b=[];_0x1de7fb[_0x4ea0d3(0x164)]!==undefined&&(_0x1de7fb[_0x4ea0d3(0x164)]&&_0x1de7fb['password'][_0x4ea0d3(0x17a)]<0x4&&_0x58532b[_0x4ea0d3(0x135)](_0x4ea0d3(0x14d)),_0x1de7fb[_0x4ea0d3(0x17e)]!==undefined&&(_0x1de7fb[_0x4ea0d3(0x164)]!==_0x1de7fb[_0x4ea0d3(0x17e)]&&_0x58532b[_0x4ea0d3(0x135)](_0x4ea0d3(0x13a))));if(_0x1de7fb[_0x4ea0d3(0x190)]!==undefined){if(!_0x1de7fb[_0x4ea0d3(0x190)]||!_0x1de7fb[_0x4ea0d3(0x190)][_0x4ea0d3(0x15c)]())_0x58532b[_0x4ea0d3(0x135)]('Please\x20enter\x20a\x20wallet\x20name');else _0x1de7fb[_0x4ea0d3(0x190)][_0x4ea0d3(0x17a)]>0x1e&&_0x58532b[_0x4ea0d3(0x135)]('Wallet\x20name\x20must\x20be\x2030\x20characters\x20or\x20less');}if(_0x1de7fb[_0x4ea0d3(0x16c)]!==undefined){const _0x473a0e=parseFloat(_0x1de7fb[_0x4ea0d3(0x16c)]);(isNaN(_0x473a0e)||_0x473a0e<=0x0)&&_0x58532b[_0x4ea0d3(0x135)](_0x4ea0d3(0x132));}if(_0x1de7fb[_0x4ea0d3(0x14e)]!==undefined){if(!_0x1de7fb[_0x4ea0d3(0x14e)]||!_0x1de7fb[_0x4ea0d3(0x14e)][_0x4ea0d3(0x15c)]())_0x58532b[_0x4ea0d3(0x135)](_0x4ea0d3(0x12d));else!_0x1de7fb['address'][_0x4ea0d3(0x180)](_0x4ea0d3(0x18b))&&_0x58532b['push'](_0x4ea0d3(0x136));}return{'isValid':_0x58532b[_0x4ea0d3(0x17a)]===0x0,'errors':_0x58532b};}static async[_0xdd34b4(0x143)](_0x3b1b9a,_0x37e469={}){const _0x5b1c1d=_0xdd34b4,{required:required=![],timeout:timeout=0x7d0,fallbackId:fallbackId=null}=_0x37e469;try{if(window[_0x5b1c1d(0x15d)]&&window['domUtils'][_0x5b1c1d(0x143)])return await window[_0x5b1c1d(0x15d)][_0x5b1c1d(0x143)](_0x3b1b9a,{'timeout':timeout,'required':required});const _0x4a4274=document[_0x5b1c1d(0x159)](_0x3b1b9a);if(!_0x4a4274&&fallbackId)return document[_0x5b1c1d(0x148)](fallbackId);if(!_0x4a4274&&required)throw new Error('Required\x20element\x20not\x20found:\x20'+_0x3b1b9a);return _0x4a4274;}catch(_0x4529d1){console[_0x5b1c1d(0x155)](_0x5b1c1d(0x17d)+_0x3b1b9a+':',_0x4529d1);if(required)throw _0x4529d1;return null;}}static[_0xdd34b4(0x13d)](_0x21256c,_0x32b65a,_0x4434fc,_0x1207c6={}){const _0xc62192=_0xdd34b4;try{let _0x3140a4;if(typeof _0x21256c==='string'){_0x3140a4=document[_0xc62192(0x159)](_0x21256c);if(!_0x3140a4)return console[_0xc62192(0x15a)](_0xc62192(0x18a)+_0x21256c),![];}else _0x3140a4=_0x21256c;return _0x3140a4[_0xc62192(0x156)](_0x32b65a,_0x4434fc,_0x1207c6),_0x3140a4[_0xc62192(0x15e)](_0x32b65a,_0x4434fc,_0x1207c6),!![];}catch(_0x36f2e4){return console[_0xc62192(0x155)](_0xc62192(0x168),_0x36f2e4),![];}}}function _0x8455(_0x12955d,_0x352a69){const _0x27d5a7=_0x27d5();return _0x8455=function(_0x845531,_0x12cb4b){_0x845531=_0x845531-0x12c;let _0x187407=_0x27d5a7[_0x845531];return _0x187407;},_0x8455(_0x12955d,_0x352a69);}window[_0xdd34b4(0x17f)]=WalletService;function _0x27d5(){const _0x59981a=['storeWallets','getElementById','activeWallet','now','log','4372785TxAeTJ','Password\x20must\x20be\x20at\x20least\x204\x20characters\x20long','address','1676SPlSCM','generateKeyPair','Validating\x20wallet\x20data...','getWalletCount','name','isPasswordSet','error','removeEventListener','Failed\x20to\x20store\x20wallet:\x20','\x20wallet\x20\x22','querySelector','warn','48VragXj','trim','domUtils','addEventListener','Private\x20key\x20is\x20required\x20for\x20import','Wallet\x20name\x20cannot\x20start\x20or\x20end\x20with\x20spaces','getWalletManager','toLowerCase','isWalletUnlocked','password','mnemonicWords','Password\x20manager\x20not\x20available','Storing\x20wallet...','Failed\x20to\x20add\x20event\x20listener:','storage','message','5896910lyFEIX','amount','Failed\x20to\x20import\x20wallet:\x20','publicKey','1790667uRpnyb','imported_key','Validating\x20wallet...','Created','Invalid\x20wallet\x20address\x20format\x20(must\x20start\x20with\x20\x22oct\x22)','generateNewWallet','Wallet\x20created\x20successfully!','validateWalletCreationInputs','createWalletObject','1998608enkwfZ','validateWalletData','length','114IcinWc','isActive','Safe\x20DOM\x20access\x20failed\x20for\x20','confirmPassword','WalletService','startsWith','Wallet\x20creation\x20failed:','\x22\x20successfully','Missing\x20required\x20wallet\x20field:\x20','source','Wallet\x20manager\x20not\x20available','test','Wallet\x20stored\x20successfully','storeWallet','metadata','Element\x20not\x20found\x20for\x20event\x20binding:\x20','oct','validateForm','publicKeyBase64','string','importWallet','walletName','some','Wallet\x20manager\x20not\x20available\x20from\x20password\x20manager','privateKey','Invalid\x20wallet\x20address\x20format','Imported','Please\x20enter\x20an\x20address','activeWalletId','walletStorage','Importing\x20wallet...','906731oEQFHz','Please\x20enter\x20a\x20valid\x20amount','Generating\x20new\x20wallet...','Invalid\x20public\x20key\x20length','push','Invalid\x20address\x20format\x20(must\x20start\x20with\x20\x22oct\x22)','Maximum\x20of\x205\x20wallets\x20allowed','Please\x20enter\x20a\x20wallet\x20name','getAllWallets','Passwords\x20do\x20not\x20match','crypto','Session\x20key\x20not\x20available\x20for\x20wallet\x20encryption','addSafeEventListener','149315KmcZZJ','Wallet\x20address\x20is\x20required\x20for\x20import','setPrivateKey','A\x20wallet\x20with\x20this\x20name\x20already\x20exists','93eaEaiP','safeGetElement','Failed\x20to\x20check\x20auth\x20status:','11CCfUBl','getAuthStatus'];_0x27d5=function(){return _0x59981a;};return _0x27d5();}